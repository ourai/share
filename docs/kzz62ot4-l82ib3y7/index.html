<!DOCTYPE html> <html lang="zh-CN" dir="ltr"> <head> <meta charset="UTF-8"> <!-- SEO --> <title>符合 Petals 接口定义的 Vue 组件库</title> <meta property="og:title" content="符合 Petals 接口定义的 Vue 组件库"> <meta name="description" content="基于「反混沌」体系的团队个性化定制，便于接入 Handie。"> <meta property="og:description" content="基于「反混沌」体系的团队个性化定制，便于接入 Handie。"> <link rel="canonical" href="https://ourai.ws/docs/kzz62ot4-l82ib3y7/"> <meta property="og:url" content="https://ourai.ws/docs/kzz62ot4-l82ib3y7/"> <meta property="og:site_name" content="欧雷共享的内容"> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "WebSite", "name" : "欧雷共享的内容", "url" : "https://ourai.ws" } </script> <meta property="og:type" content="article"> <meta property="article:published_time" content="2022-02-23T14:19:43+08:00"> <link rel="next" href="https://ourai.ws/docs/l7ser9jk-l817jmzw/" title="规则引擎标准化需求"> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "NewsArticle", "headline": "符合 Petals 接口定义的 Vue 组件库", "image": null, "datePublished": "2022-02-23T14:19:43+08:00", "description": "基于「反混沌」体系的团队个性化定制，便于接入 Handie。" } </script> <link rel="author" href="https://ourai.ws"> <!-- 页面渲染兼容性 --> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1.0"> <!-- 订阅 --> <link type="application/atom+xml" rel="alternate" href="https://ourai.ws/atom.xml" title="欧雷流" /> <link type="application/rss+xml" rel="alternate" href="//share.ourai.ws/rss.xml" title="欧雷共享的内容"> <!-- 站点 icon --> <link rel="icon" href="/assets/favicon-3e749ca030e3b71eb2662d947c789061d2da9e0f4ee5f3360cfa9ccbe053c8ba.ico"> <!-- 静态资源 --> <link type="text/css" rel="stylesheet" href="/assets/disqusjs.min-b077139304675330d06888b873bd88158951637593a3c17c4674bc855caf71af.css"> <link type="text/css" rel="stylesheet" href="/assets/global-cf407110a040e90d8729159566aed4aaf5b58023447f098d688501887e91f510.css"> <link type="text/css" rel="stylesheet" href="/assets/pages/post-d5f1244d69bfc31e3c7b73b16140ed8a09f0b5af40515abeae522bee80e92ec9.css"> <script type="text/javascript" src="/assets/global-b3a80dd53acf48ad7228d6fd741dba15d3845cbc3783bdbbf7244151a45628aa.js"></script> <!--[if lt IE 9]> <script type="text/javascript" src="/assets/support_ie8-e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js"></script> <![endif]--> </head> <body class="Page" itemscope itemtype="http://schema.org/WebPage"> <main class="Page-content"> <div id="sharedDoc" class="container"> <p style="height: 100%; display: flex; align-items: center; justify-content: center; font-size: 8rem;">🙅🏻‍♂️</p> </div> </main> <script> if (decodeURIComponent(location.search.slice(1)).split('|').filter(c => !!c).map(c => String.fromCharCode(Number(c))).join('') === 'vdxv') { var $shared = $('#sharedDoc'); $shared.html( `<article class="Page-main Article"> <header class="Article-header"> <h1 class="Article-title">符合 Petals 接口定义的 Vue 组件库</h1> <p><a href="javascript:void(0);">欧雷</a> 发表于 <time datetime="2022-02-23T14:19:43+08:00">2022-02-23 14:19:43</time></p> </header> <div class="Article-content col-md-9"><p>基于「反混沌」体系的团队个性化定制，便于接入 Handie。</p> <h2 id="section">项目安排</h2> <table> <thead> <tr> <th>项目</th> <th>内容</th> </tr> </thead> <tbody> <tr> <td>时间</td> <td>2022-02-23 ~</td> </tr> <tr> <td>优先级</td> <td>低</td> </tr> <tr> <td>人员</td> <td>@lin-yao</td> </tr> <tr> <td>相关资料</td> <td><a href="http://10.199.137.228:8080/admin/repos/fintech/dweb-ui" target="_blank" rel="external nofollow">dweb-ui</a>、<a href="http://10.199.142.66:8000/vue-docs/components/" target="_blank" rel="external nofollow">Vue 组件文档</a></td> </tr> </tbody> </table> <h2 id="section-1">需求分析</h2> <h3 id="petals-">Petals 接口的覆盖程度</h3> <p>备注中没做特别说明的 UI 组件就是直接从 <a href="https://www.npmjs.com/package/element-ui/v/2.15.1" target="_blank" rel="external nofollow"><code>element-ui@2.15.1</code></a> 引入的：</p> <table> <thead> <tr> <th><code>dweb-ui</code> 组件</th> <th>Petals 接口</th> <th>备注</th> </tr> </thead> <tbody> <tr> <td><code>Alert</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Autocomplete</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Badge</code></td> <td><code>Badge</code></td> <td>-</td> </tr> <tr> <td><code>BreadcrumbItem</code></td> <td><code>BreadcrumbItem</code></td> <td>-</td> </tr> <tr> <td><code>Breadcrumb</code></td> <td><code>Breadcrumb</code></td> <td>-</td> </tr> <tr> <td><code>Button</code></td> <td><code>Button</code></td> <td>-</td> </tr> <tr> <td><code>ButtonGroup</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Calendar</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Card</code></td> <td><code>Card</code></td> <td>-</td> </tr> <tr> <td><code>Carousel</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>CarouselItem</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Cascader</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Checkbox</code></td> <td><code>Checkbox</code></td> <td>-</td> </tr> <tr> <td><code>CheckboxButton</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>CheckboxGroup</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Row</code></td> <td><code>GridRow</code></td> <td>-</td> </tr> <tr> <td><code>Col</code></td> <td><code>GridCol</code></td> <td>-</td> </tr> <tr> <td><code>CollapseItem</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Collapse</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>CollapseTransition</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>ColorPicker</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Container</code></td> <td><code>LayoutContainer</code></td> <td>-</td> </tr> <tr> <td><code>Main</code></td> <td><code>LayoutMain</code></td> <td>-</td> </tr> <tr> <td><code>Aside</code></td> <td><code>LayoutAside</code></td> <td>-</td> </tr> <tr> <td><code>Header</code></td> <td><code>LayoutHeader</code></td> <td>-</td> </tr> <tr> <td><code>Footer</code></td> <td><code>LayoutFooter</code></td> <td>-</td> </tr> <tr> <td><code>Divider</code></td> <td><code>Divider</code></td> <td>-</td> </tr> <tr> <td><code>Drawer</code></td> <td><code>Drawer</code></td> <td>-</td> </tr> <tr> <td><code>Form</code></td> <td><code>Form</code></td> <td>-</td> </tr> <tr> <td><code>FormItem</code></td> <td><code>FormField</code></td> <td>-</td> </tr> <tr> <td><code>Image</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>InfiniteScroll</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>InputNumber</code></td> <td><code>NumberInput</code></td> <td>-</td> </tr> <tr> <td><code>Link</code></td> <td><code>Link</code></td> <td>-</td> </tr> <tr> <td><code>Loading</code></td> <td><code>Wait</code></td> <td>-</td> </tr> <tr> <td><code>Menu</code></td> <td><code>NavMenu</code></td> <td>-</td> </tr> <tr> <td><code>MenuItem</code></td> <td><code>NavMenuItem</code></td> <td>-</td> </tr> <tr> <td><code>MenuItemGroup</code></td> <td><code>NavMenuItemGroup</code></td> <td>-</td> </tr> <tr> <td><code>Submenu</code></td> <td><code>NavSubMenu</code></td> <td>-</td> </tr> <tr> <td><code>Message</code></td> <td><code>Message</code></td> <td>-</td> </tr> <tr> <td><code>Notification</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Select</code></td> <td><code>Select</code></td> <td>-</td> </tr> <tr> <td><code>Option</code></td> <td><code>Option</code></td> <td>-</td> </tr> <tr> <td><code>OptionGroup</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>PageHeader</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Popconfirm</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Progress</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Radio</code></td> <td><code>Radio</code></td> <td>-</td> </tr> <tr> <td><code>RadioButton</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>RadioGroup</code></td> <td><code>RadioGroup</code></td> <td>-</td> </tr> <tr> <td><code>Rate</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Scrollbar</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Slider</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Spinner</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Steps</code></td> <td><code>Steps</code></td> <td>-</td> </tr> <tr> <td><code>Step</code></td> <td><code>Step</code></td> <td>-</td> </tr> <tr> <td><code>Switch</code></td> <td><code>Switch</code></td> <td>-</td> </tr> <tr> <td><code>Tabs</code></td> <td><code>Tabs</code></td> <td>-</td> </tr> <tr> <td><code>TabPane</code></td> <td><code>TabPane</code></td> <td>-</td> </tr> <tr> <td><code>Tag</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>TimelineItem</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Timeline</code></td> <td> </td> <td>-</td> </tr> <tr> <td><code>Tooltip</code></td> <td><code>Tooltip</code></td> <td>-</td> </tr> <tr> <td><code>Transfer</code></td> <td><code>Transfer</code></td> <td>-</td> </tr> <tr> <td><code>Tree</code></td> <td><code>Tree</code></td> <td>-</td> </tr> <tr> <td><code>Dialog</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Dropdown</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>DropdownMenu</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>DropdownItem</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Icon</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Input</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>JrMessageBox</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>MessageBox</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Pagination</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Popover</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Split</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Table</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>TableColumn</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>DatePicker</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>TimePicker</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>TimeSelect</code></td> <td> </td> <td>=====</td> </tr> <tr> <td><code>Upload</code></td> <td> </td> <td>=====</td> </tr> </tbody> </table> <p>共 <strong>82</strong> 个 UI 组件，除 <code>CollapseTransition</code>、<code>Loading</code>、<code>InfiniteScroll</code>、<code>MessageBox</code>、<code>Notification</code>、<code>Message</code>、<code>JrMessageBox</code> 之外的 <strong>75</strong> 个注册为全局的。</p> <h3 id="section-2">魔改组件与原版间的差异</h3> <h4 id="dialog-"><code>Dialog</code> 组件</h4> <p>与原版相比：</p> <ul> <li>缺少 <code>destroyOnClose</code> 属性定义；</li> <li><code>el-dialog</code> 主体少了 <code>key</code> 属性；</li> <li><code>el-dialog__header</code> 新增了 <code>el-dialog__header-has-title</code> CSS 类。</li> </ul> <h4 id="dropdown-"><code>Dropdown</code> 组件</h4> <p>无任何不同。</p> <h4 id="dropdownmenu-"><code>DropdownMenu</code> 组件</h4> <p>无任何不同。</p> <h4 id="dropdownitem-"><code>DropdownItem</code> 组件</h4> <p>无任何不同。</p> <h4 id="icon-"><code>Icon</code> 组件</h4> <p>完全自定义。</p> <h4 id="input-"><code>Input</code> 组件</h4> <ul> <li><code>el-input-group__prepend</code> 改为 <code>el-input-group__prepend__dwebui</code>；</li> <li><code>el-input-group__append</code> 改为 <code>el-input-group__append__dwebui</code>；</li> <li><code>el-textarea__inner</code> 缺少 <code>@compositionupdate</code> 的处理；</li> <li><code>el-input__inner</code> 缺少 <code>@compositionupdate</code> 的处理；</li> <li><code>el-input__icon el-icon-circle-close el-input__clear</code> 缺少 <code>@mousedown.prevent</code>；</li> <li><code>calcIconOffset</code> 方法中的判断条件新增 <code>this.$el.querySelector(</code>.el-input-group__${pendant}<code>)</code>。</li> </ul> <h4 id="messagebox-"><code>MessageBox</code> 组件</h4> <ul> <li>默认标题为「提示」；</li> <li><code>el-message-box__content</code> 新增了 <code>el-message-box__header-no</code> CSS 类；</li> <li>缺少 <code>el-message-box__container</code>；</li> <li><code>el-message-box__message</code> 新增了 <code>el-message-box__status-no</code> CSS 类；</li> <li><code>el-message-box__btns</code> 中的按钮组件缺少 <code>size</code> 属性；</li> <li>缺少 <code>handleClose</code> 方法定义。</li> </ul> <h4 id="jrmessagebox-"><code>JrMessageBox</code> 组件</h4> <p>与 <code>MessageBox</code> 相比只是 <code>title</code> 的赋值和按钮顺序不同。</p> <h4 id="pagination-"><code>Pagination</code> 组件</h4> <ul> <li>输入框组件使用自定义的；</li> <li><code>layout</code> 属性新增 <code>detail</code> 占位符用来显示当前页数据是第几条到第几条并进行相关处理；</li> <li>缺少 <code>hideOnSinglePage</code> 属性定义及处理逻辑；</li> <li>内部状态新增 <code>fromSize</code> 和 <code>toSize</code>；</li> <li>内部组件定义 <code>&lt;my-slot /&gt;</code> 代替默认的 <code>&lt;slot /&gt;</code>。</li> </ul> <h4 id="popover-"><code>Popover</code> 组件</h4> <ul> <li>新增 <code>&lt;slot name="custom-dom" /&gt;</code>；</li> <li><code>&lt;slot name="reference" /&gt;</code> 没被 <code>el-popover__reference-wrapper</code> 包裹；</li> <li>内部 <code>reference</code> 变量的赋值逻辑不同。</li> </ul> <h4 id="split-"><code>Split</code> 组件</h4> <p>在 <code>iview</code> 的原版组件基础上 Vue 插件化。</p> <h4 id="table-"><code>Table</code> 组件</h4> <h4 id="tablecolumn-"><code>TableColumn</code> 组件</h4> <h4 id="datepicker-"><code>DatePicker</code> 组件</h4> <h4 id="timepicker-"><code>TimePicker</code> 组件</h4> <h4 id="timeselect-"><code>TimeSelect</code> 组件</h4> <h4 id="upload-"><code>Upload</code> 组件</h4> <h3 id="section-3">改造方案</h3> <ul> <li>暴露遵循 Petals 接口的组件和兼容原来全局注册的 <code>install</code> 函数；</li> <li>直接引用 <code>element-ui</code> 的组件可以直接使用 <code>@kokiri/adapter-element-ui</code> 中的组件；</li> <li>没有在应用中使用的组件暂不处理；</li> <li>无构建/半构建，使用「源码」。</li> </ul> </div> <footer class="Article-footer col-md-3"><section class="Widget Widget--toc"> <div class="Widget-header"> <h2 class="Widget-title">目录</h2> </div> <div class="Widget-body"></div> </section> </footer> </article>` ); $('table', $shared).addClass('table table-bordered'); } </script> <script type="text/javascript" src="/assets/components-a266f21fe1dfd61bebf40e74872cbf901eb3e201f7d33e9e5d5af9a55f4b24ea.js"></script> <script type="text/javascript" src="/assets/initializers/time-8d7a529a66ae6cb53c2283d21fd6a12c538b8473dd5bd76458366d09adce7bf6.js"></script><script type="text/javascript" src="/assets/initializers/lazyload-44b7df8a9282d598284d522e64d6be9ac88d466f3c4a734a514303e99347b2c9.js"></script> </body> </html>
