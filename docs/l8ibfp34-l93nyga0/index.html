<!DOCTYPE html> <html lang="zh-CN" dir="ltr"> <head> <meta charset="UTF-8"> <!-- SEO --> <title>知识中心数据回流</title> <meta property="og:title" content="知识中心数据回流"> <meta name="description" content="项目安排"> <meta property="og:description" content="项目安排"> <link rel="canonical" href="https://ourai.ws/docs/l8ibfp34-l93nyga0/"> <meta property="og:url" content="https://ourai.ws/docs/l8ibfp34-l93nyga0/"> <meta property="og:site_name" content="欧雷共享的内容"> <script type="application/ld+json"> { "@context" : "http://schema.org", "@type" : "WebSite", "name" : "欧雷共享的内容", "url" : "https://ourai.ws" } </script> <meta property="og:type" content="article"> <meta property="article:published_time" content="2022-09-26T13:15:04+08:00"> <link rel="next" href="https://ourai.ws/docs/l973qx1k-l99wsmha/" title="日报 20221013：女人用身体换钱财地位可耻吗？"> <link rel="prev" href="https://ourai.ws/docs/kruel7yw-l86n1pun/" title="Handie"> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "NewsArticle", "headline": "知识中心数据回流", "image": null, "datePublished": "2022-09-26T13:15:04+08:00", "description": "项目安排" } </script> <link rel="author" href="https://ourai.ws"> <!-- 页面渲染兼容性 --> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1.0"> <!-- 订阅 --> <link type="application/atom+xml" rel="alternate" href="https://ourai.ws/atom.xml" title="欧雷流" /> <meta name="theme-color" content="#0871ab"> <link type="application/rss+xml" rel="alternate" href="//share.ourai.ws/rss.xml" title="欧雷共享的内容"> <!-- 站点 icon --> <link rel="icon" href="/assets/favicon-3e749ca030e3b71eb2662d947c789061d2da9e0f4ee5f3360cfa9ccbe053c8ba.ico"> <!-- 静态资源 --> <link type="text/css" rel="stylesheet" href="/assets/disqusjs.min-b077139304675330d06888b873bd88158951637593a3c17c4674bc855caf71af.css"> <link type="text/css" rel="stylesheet" href="/assets/global-cf407110a040e90d8729159566aed4aaf5b58023447f098d688501887e91f510.css"> <link type="text/css" rel="stylesheet" href="/assets/pages/post-d5f1244d69bfc31e3c7b73b16140ed8a09f0b5af40515abeae522bee80e92ec9.css"> <script type="text/javascript" src="/assets/global-b3a80dd53acf48ad7228d6fd741dba15d3845cbc3783bdbbf7244151a45628aa.js"></script> <!--[if lt IE 9]> <script type="text/javascript" src="/assets/support_ie8-e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js"></script> <![endif]--> </head> <body class="Page" itemscope itemtype="http://schema.org/WebPage"> <main class="Page-content"> <div id="sharedDoc" class="container"> <p style="height: 100%; display: flex; align-items: center; justify-content: center; font-size: 8rem;">🙅🏻‍♂️</p> </div> </main> <ourai-doc id="__ourai_doc__" style="display: none;" data-code="02m7"> <article class="Page-main Article"> <header class="Article-header"> <h1 class="Article-title">知识中心数据回流</h1> <p><a href="https://ourai.ws/people/ourai/" target="_blank" ref="external nofollow">欧雷</a> 发表于 <time datetime="2022-09-26T13:15:04+08:00">2022-09-26 13:15:04</time></p> </header> <div class="Article-content col-md-9"><h2 id="section">项目安排</h2> <h3 id="section-1">概览</h3> <table> <thead> <tr> <th>项目</th> <th>内容</th> </tr> </thead> <tbody> <tr> <td>时间</td> <td>2022 年 10 月 8 日至 2022 年 10 月 21 日</td> </tr> <tr> <td>优先级</td> <td>低</td> </tr> <tr> <td>人员</td> <td>产品：丁严华<br />后端：<a href="http://geosmart.github.io/" title="查看王刚的个人主页" target="_blank" rel="external nofollow">王刚</a>、朱志远<br />前端：<a href="https://yaol.in/" title="查看林垚的个人主页" target="_blank" rel="external nofollow">林垚</a></td> </tr> <tr> <td>需求</td> <td><a href="https://doc.weixin.qq.com/doc/w3_AJQAggawALcWhM0eYYESHG8TQ8C81?scode=AAoA1wcYAAcqTUXdgQAJQAggawALc" target="_blank" rel="external nofollow">知识中心数据回流</a></td> </tr> <tr> <td>代码</td> <td><a href="http://10.199.137.228:8080/admin/repos/fintech/bot-factory" target="_blank" rel="external nofollow">fintech/bot-factory</a></td> </tr> <tr> <td>其他</td> <td><a href="https://chuangtzu.dc.servyou-it.com/VisionDetail?productType=ADMIN&amp;productId=55&amp;branchId=82&amp;moduleName=20220916_%E7%9F%A5%E8%AF%86%E4%B8%AD%E5%BF%83%E6%95%B0%E6%8D%AE%E5%9B%9E%E6%B5%81" target="_blank" rel="external nofollow">设计稿</a></td> </tr> </tbody> </table> <h3 id="section-2">任务</h3> <table> <thead> <tr> <th>模块</th> <th>功能点</th> <th>优先级</th> <th>负责人</th> <th>禅道</th> <th>进度</th> </tr> </thead> <tbody> <tr> <td>首页</td> <td>数据看板</td> <td>P3</td> <td>前端：<a href="https://yaol.in/" title="查看林垚的个人主页" target="_blank" rel="external nofollow">林垚</a><br />后端：朱志远</td> <td><a href="http://zentao.dc.servyou-it.com/pro/task-view-381192.html" target="_blank" rel="external nofollow">#381192</a></td> <td>页面完</td> </tr> <tr> <td>知识库</td> <td>知识库概览</td> <td>P3</td> <td>前端：<a href="https://yaol.in/" title="查看林垚的个人主页" target="_blank" rel="external nofollow">林垚</a><br />后端：朱志远</td> <td><a href="http://zentao.dc.servyou-it.com/pro/task-view-381195.html" target="_blank" rel="external nofollow">#381195</a></td> <td>页面完</td> </tr> <tr> <td> </td> <td>知识详情指标</td> <td>P3</td> <td>前端：<a href="https://yaol.in/" title="查看林垚的个人主页" target="_blank" rel="external nofollow">林垚</a><br />后端：朱志远</td> <td><a href="http://zentao.dc.servyou-it.com/pro/task-view-381197.html" target="_blank" rel="external nofollow">#381197</a></td> <td>页面完</td> </tr> </tbody> </table> <h2 id="section-3">需求分析</h2> <h3 id="section-4">展示与交互</h3> <h4 id="section-5">组件复用</h4> <p>有的地方与<a href="https://chuangtzu.dc.servyou-it.com/VisionDetail?productType=JOIN&amp;productId=55&amp;branchId=82&amp;moduleName=20220604_%E5%A4%9A%E6%BA%90%E5%BC%82%E6%9E%84%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E" target="_blank" rel="external nofollow">知识引擎</a>别无二致，需要复用：</p> <ul> <li>知识引擎的「热门排行榜」与新增的「热点问答榜」、「热点知识榜」、「热门知识」</li> <li>两方的「实时政策更新」</li> </ul> <p><img src="/assets/docs/l8ibfp34-l93nyga0/ranking-and-timeline-bee973c1fe5de68b626ce79fd9f671e158ae560f0714dafeb7d62c5b2ef410f4.png" alt="" /></p> <h4 id="section-6">数据总览</h4> <p>每个信息块标题处都有问号提示说明，需要产品或后端将文案整理出来：</p> <p><img src="/assets/docs/l8ibfp34-l93nyga0/block-hints-in-dashboard-b6859af3e9a268a5d9e81aba345a84e9b97c8d6a1870c56742d8728beac77678.png" alt="" /></p> <h3 id="section-7">数据接口</h3> <h4 id="section-8">数据总览</h4> <ul> <li>「热点问答榜」接口</li> <li>「热点知识榜」接口 <ul> <li><strong>前端复用知识引擎首页的「热门排行榜」接口</strong></li> </ul> </li> <li>「实时政策更新」接口 <ul> <li><strong>前端复用知识引擎首页的「实时政策更新」接口</strong></li> </ul> </li> <li>统计指标接口 <ul> <li>通过一个接口返回所有指标数据</li> <li>每个指标的数据结构要一致</li> <li>「内容总条数」要支持图表显示</li> </ul> </li> <li>~~「试点地区满意度」接口~~（后端决定与统计指标接口合并） <ul> <li>要支持图表显示</li> </ul> </li> </ul> <h4 id="section-9">知识库概览</h4> <ul> <li>「热门知识」接口</li> <li>「知识库动态」接口 <ul> <li><strong>前端复用「运维-知识库历史记录」列表接口</strong></li> </ul> </li> <li>「知识库详情」接口 <ul> <li><strong>前端复用知识库编辑时的详情接口</strong>，并且后端要加上关联的可选标签数据（仅限一级）</li> </ul> </li> <li>统计指标接口 <ul> <li>通过一个接口返回所有指标数据</li> <li>每个指标的数据结构要一致</li> </ul> </li> </ul> <h4 id="section-10">详情页指标</h4> <ul> <li>知识详情指标接口 <ul> <li>返回数据要根据指标类别分组</li> </ul> </li> </ul> <h2 id="section-11">设计</h2> <p>数据总览的「热点问答榜」、「热点知识榜」、「实时政策更新」和知识库概览的「热门知识」、「知识库动态」都是列表形式，并且各自单独对应一个接口，因此考虑全部封装为列表视图部件。</p> <h3 id="section-12">组件复用</h3> <p>将榜单类列表先封装成项目级控件：</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>src/shared
   └── components
       └── control
           └── ranking
               └── ...</code></pre></figure> <p>再进一步封装成项目级列表视图部件：</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>src/shared
   └── components
       └── widget
           └── view
               └── ranking
                   └── ...</code></pre></figure> <p>并通过 <code>renderType</code> 引用：</p> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="c1">// 榜单类列表的视图配置</span>
<span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;RankingListView&quot;</span><span class="p">,</span>
  <span class="nx">category</span><span class="o">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
  <span class="nx">renderType</span><span class="o">:</span> <span class="s2">&quot;ranking&quot;</span><span class="p">,</span>
  <span class="nx">fields</span><span class="o">:</span> <span class="p">[],</span>
<span class="p">}</span></code></pre></figure> <h3 id="dashboard-"><code>dashboard</code> 模块</h3> <p>新增一个 <code>dashboard</code> 模块用于全局/通用性数据统计类逻辑及展示：</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>src/domain
   └── dashboard
       └── ...</code></pre></figure> <h4 id="section-13">类型定义</h4> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="c1">// TODO</span></code></pre></figure> <h4 id="section-14">数据服务</h4> <p>数据总览页用到的所有接口都在该模块下定义：</p> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="k">async</span> <span class="kd">function</span> <span class="nx">getMetricList</span><span class="p">()</span> <span class="p">{}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getPopularQuestionAndAnswerList</span><span class="p">()</span> <span class="p">{}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getPopularKnowledgeList</span><span class="p">()</span> <span class="p">{}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getPolicyActivityList</span><span class="p">()</span> <span class="p">{}</span></code></pre></figure> <h4 id="section-15">可复用视图</h4> <p>由于「热点知识榜」和「实时政策更新」与知识引擎的那两个是可复用的，将它们分离到 <code>dashboard</code> 模块中：</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>src/domain
   └── dashboard
       └── views
           ├── policy-activity-list
           │   ├── PopularActivityList.vue
           │   └── index.ts
           └── popular-knowledge-list
               └── index.ts</code></pre></figure> <p>然后在数据总览与知识引擎这两个页面中用视图渲染器渲染：</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="c">&lt;!-- 在数据总览和知识引擎中渲染「热点知识榜」 --&gt;</span>
<span class="p">&lt;</span><span class="nt">view-renderer</span> <span class="na">view</span><span class="o">=</span><span class="s">&quot;dashboard.views.PopularKnowledgeListView&quot;</span> <span class="p">/&gt;</span>

<span class="c">&lt;!-- 在数据总览和知识引擎中渲染「实时政策更新」 --&gt;</span>
<span class="p">&lt;</span><span class="nt">view-renderer</span> <span class="na">view</span><span class="o">=</span><span class="s">&quot;dashboard.views.PolicyActivityListView&quot;</span> <span class="p">/&gt;</span></code></pre></figure> <h4 id="section-16">数据总览</h4> <p>在 <code>dashboard</code> 模块中新增剩余视图部件：</p> <figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>src/domain
   └── dashboard
       └── views
           ├── dashboard-overview
           │   ├── DashboardOverview.vue
           │   └── index.ts
           └── popular-question-and-answer-list
               └── index.ts</code></pre></figure> <p>再更改路由配置中首页要渲染的组件指向：</p> <figure class="highlight"><pre><code class="language-ts" data-lang="ts"><span></span><span class="p">{</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s2">&quot;home&quot;</span><span class="p">,</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Home&quot;</span><span class="p">,</span>
  <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s2">&quot;@/domain/dashboard/views/dashboard-overview&quot;</span><span class="p">),</span>
<span class="p">},</span></code></pre></figure> <p>所有的指标卡片需要在 <code>DashboardOverview.vue</code> 中根据后端返回数据计算出在布局中的位置。</p> </div> <footer class="Article-footer col-md-3"><section class="Widget Widget--toc"> <div class="Widget-header"> <h2 class="Widget-title">目录</h2> </div> <div class="Widget-body"></div> </section> </footer> </article> </ourai-doc> <script type="text/javascript" src="/assets/pages/doc-c880dc4660dee6b589b91fa90d96d4362f806002998d7fba77f76c8db76c973d.js"></script><script type="text/javascript" src="/assets/components-a266f21fe1dfd61bebf40e74872cbf901eb3e201f7d33e9e5d5af9a55f4b24ea.js"></script> <script type="text/javascript" src="/assets/initializers/time-8d7a529a66ae6cb53c2283d21fd6a12c538b8473dd5bd76458366d09adce7bf6.js"></script><script type="text/javascript" src="/assets/initializers/lazyload-44b7df8a9282d598284d522e64d6be9ac88d466f3c4a734a514303e99347b2c9.js"></script> </body> </html>
